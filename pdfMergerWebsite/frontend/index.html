<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Merger | Combine Multiple PDFs Easily</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Add PWA support -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4361ee">
    <link rel="apple-touch-icon" href="images/icons/icon-192x192.png">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' https://cdnjs.cloudflare.com; font-src 'self' https://cdnjs.cloudflare.com;">
</head>
<body>
    <!-- Add theme toggle -->
    <div class="theme-toggle-container">
        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark/light theme">
            <i class="fas fa-moon"></i>
            <i class="fas fa-sun"></i>
        </button>
    </div>

    <div class="container">
        <h1>PDF Merger</h1>
        
        <form id="upload-form" enctype="multipart/form-data">
            <label for="pdf-files">Select PDF files to merge:</label>
            <input type="file" id="pdf-files" name="pdf-files" accept="application/pdf" multiple required>
            <label for="pdf-files" class="file-input-label">
                <i class="fas fa-file-pdf file-input-icon"></i> 
                Choose PDF Files
            </label>
            
            <div class="filename-container">
                <label for="output-filename">Name your merged file:</label>
                <div class="filename-input-group">
                    <input 
                        type="text" 
                        id="output-filename" 
                        name="output-filename" 
                        placeholder="merged_document"
                    >
                    <span class="filename-extension">.pdf</span>
                </div>
            </div>
            
            <button type="submit">
                <i class="fas fa-object-group"></i> Merge PDFs
            </button>
        </form>
        
        <div id="result" class="result-container"></div>
    </div>

    <!-- Features section with 2x2 grid -->
    <div class="features-section">
        <div class="container">
            <h2>Features</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Secure</h3>
                    <p>Your files are processed locally and deleted immediately after download. Your data never leaves your computer.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3>Fast</h3>
                    <p>Quickly merge multiple PDF files into a single document with our optimized processing engine.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-desktop"></i>
                    </div>
                    <h3>Easy to Use</h3>
                    <p>Simple interface that makes PDF merging accessible to everyone, no technical knowledge required.</p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <h3>Custom Naming</h3>
                    <p>Name your merged PDF document exactly how you want it for better organization.</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- How It Works section -->
    <div class="help-section">
        <div class="container">
            <h2>How It Works</h2>
            <div class="steps-container">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Select PDF Files</h3>
                        <p>Click "Choose PDF Files" and select two or more PDF files you want to merge.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Name Your File</h3>
                        <p>Enter a name for your merged PDF file or use the default name.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Merge and Download</h3>
                        <p>Click "Merge PDFs" and download your combined PDF document.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>Â© 2025 PDF Merger. All rights reserved.</p>
            <p>A simple tool to combine multiple PDF files into one document.</p>
        </div>
    </footer>

    <script src="js/pdf-upload.js" nonce="{{ nonce }}"></script>
    <script src="js/theme-toggle.js" nonce="{{ nonce }}"></script>
    <!-- Add this just before the closing </body> tag -->
    <script nonce="{{ nonce }}">
    // Monitor theme changes
    const observer = new MutationObserver((mutations) => {
      mutations.forEach((mutation) => {
        if (mutation.attributeName === 'data-theme') {
          const currentTheme = document.documentElement.getAttribute('data-theme');
          console.log(`Theme changed to: ${currentTheme}`);
          
          // Create a visual indicator for debugging
          const notification = document.createElement('div');
          notification.style.position = 'fixed';
          notification.style.top = '10px';
          notification.style.left = '10px';
          notification.style.padding = '5px 10px';
          notification.style.background = currentTheme === 'dark' ? '#6366f1' : '#4361ee';
          notification.style.color = 'white';
          notification.style.borderRadius = '4px';
          notification.style.zIndex = '9999';
          notification.textContent = `Theme: ${currentTheme}`;
          
          document.body.appendChild(notification);
          
          // Remove after 2 seconds
          setTimeout(() => {
            notification.remove();
          }, 2000);
        }
      });
    });
    
    // Start observing
    observer.observe(document.documentElement, {
      attributes: true
    });
    </script>
</body>
</html>